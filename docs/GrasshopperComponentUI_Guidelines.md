━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Grasshopper コンポーネント UI デザインガイドライン
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

最終更新: 2025-10-13

────────────────────────────────────────────────────────────────
概要
────────────────────────────────────────────────────────────────
FEMur プロジェクトの Grasshopper コンポーネントにおける
カスタム UI のレイアウト数値と設計指針をまとめたドキュメント。
見出し記号は使用せず、途切れにくいスタイルで記述している。

────────────────────────────────────────────────────────────────
対象ファイル
────────────────────────────────────────────────────────────────
FEMur.GH\Models\AssembleModelAttributes.cs
メニューを展開する「Display」タブと、4つのチェックボックス
(NodeID, ElementID, Load, Support) を持つ。

────────────────────────────────────────────────────────────────
AssembleModel 用 定数（コード同期用コピー・ペーストブロック）
────────────────────────────────────────────────────────────────
下記は AssembIeModelAttributes.cs の UI 定数をそのまま反映できる形式。
このブロックを更新すれば、ドキュメントとコードの整合が保てる。

────────────────────────────────────────────────────────────────
関連レイアウト実装（右端基準のチェックボックス配置）
────────────────────────────────────────────────────────────────
チェックボックスが右側ではみ出さないための配置計算。
必要に応じて該当部分をそのまま同期する。

────────────────────────────────────────────────────────────────
数値設定の意図と根拠
────────────────────────────────────────────────────────────────
・左右余白（COMPONENT_MARGIN_HORIZONTAL=2f）
  コンポーネント外枠の視認性を保ちつつ、内部領域を確保する最小値。

・上下余白（COMPONENT_MARGIN_VERTICAL=4f）
  タブとメニュー展開領域の重なり防止、にじみ防止のための最小値。

・タブ高さ（TAB_HEIGHT=14f）と上余白（TAB_MARGIN_TOP=4f）
  GH_FontServer.Small でラベルが潰れない最小の高さと間隔。

・メニュー左余白（MENU_LEFT_MARGIN=8f）
  ラベルの左はみ出し防止。8f で NodeID/ElementID/Load/Support の全てが収まる。

・メニュー上余白（MENU_TOP_PADDING=5f）
  タブとメニュー本文の間の視覚的間隔を確保。

・メニュー下余白（MENU_BOTTOM_PADDING=3f）
  予備の下部スペース（現状はレイアウト計算に未使用、将来拡張用）。

・チェックボックスサイズ（CONTROL_SIZE=10f）
  Small フォントとの比率で最小限の操作性と視認性を両立。

・右マージン（CONTROL_RIGHT_MARGIN=15f）
  右側はみ出し防止。bounds.Right からのオフセットで安定配置。

・塗り余白（CONTROL_FILL_MARGIN=2f）
  外枠と塗りの間隔を確保し、ON 状態の視認性を改善。

・行間（LINE_HEIGHT_NORMAL=14f）
  ラベルとコントロールの重なり防止。4行構成でちょうど良い間隔。

・メニュー総高さ（MENU_CONTENT_HEIGHT=62f）
  計算根拠: 5f（上余白） + 14f×4（4行） + 1f（ボトム余裕） ≒ 62f
  最下段 Support のラベル下端が枠からはみ出さないことを確認済み。

・色（TAB_BACKGROUND_COLOR, CONTROL_FILL_COLOR, TEXT_COLOR, TAB_TEXT_COLOR）
  タブとチェック状態の塗りはダークグレー、テキストは白/黒の高コントラスト。

────────────────────────────────────────────────────────────────
同期手順（コード → ドキュメント）
────────────────────────────────────────────────────────────────
1. AssembleModelAttributes.cs の UI 定数ブロックを開く
2. 本ドキュメントの「AssembleModel 用 定数（コード同期用）」のコードブロックを丸ごと置換
3. 右端基準の配置式に変更がある場合は「関連レイアウト実装」ブロックも更新
4. 保存してレビュー（テキストはみ出しと右端はみ出しがないことを確認）

────────────────────────────────────────────────────────────────
既知の落とし穴（回避策）
────────────────────────────────────────────────────────────────
・チェックボックスの右はみ出し
  leftMargin + bounds.Width で計算せず、bounds.Right を基準にする。
・メニューの下はみ出し
  MENU_CONTENT_HEIGHT を増減して調整。行数追加時は行間を掛け算で反映。
・ラベルの読みにくさ
  Small フォントを前提に、TAB_HEIGHT と LINE_HEIGHT_NORMAL を維持。

────────────────────────────────────────────────────────────────
変更履歴
────────────────────────────────────────────────────────────────
2025-10-13
・AssembleModel の UI 定数と右端基準レイアウトを確定
・テキスト／チェックボックスのはみ出し対策を明文化
・コード同期用のコピー・ペーストブロックを追加